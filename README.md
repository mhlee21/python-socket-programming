# νμ΄μ¬ μ†μΌ“ ν†µμ‹  ν”„λ΅κ·Έλλ°

> CS λ° μ•κ³ λ¦¬μ¦ μ¤ν„°λ”” ([csStudy](https://github.com/mhlee21/csStudy)) μ—μ„ μ§„ν–‰ν• λ„¤νΈμ›ν¬ μ¤ν„°λ””  μ‹¤μµ κ³Όμ 

## π” Introduction

python TCP socket κ³Ό thread λ¥Ό μ΄μ©ν• μ±„ν… ν”„λ΅κ·Έλ¨ κµ¬ν„

* my_server.py
  * ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ°›μ€ λ©”μ„Έμ§€λ¥Ό λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² μ¬μ „μ†΅
  * ν΄λΌμ΄μ–ΈνΈ μ…μ¥/ν‡΄μ¥ μ‹ λ‹¤λ¥Έ ν΄λΌμ΄μ–ΈνΈμ—κ² μ•λ¦Ό λ©”μ„Έμ§€ μ „μ†΅
  * μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈκ°€ λ”μ΄μƒ μ—†μ„ κ²½μ° 'ctrl+c'λ¥Ό ν†µν•΄ μΆ…λ£ κ°€λ¥
* my_client.py
  * μ„λ²„ μ ‘μ† μ‹ λ‹‰λ„¤μ„ μ…λ ¥
  * μ„λ²„λ΅λ¶€ν„° λ°›μ€ λ©”μ„Έμ§€ μ½μ†”μ°½μ— μ¶λ ¥
  * '/q' μ…λ ¥μ„ ν†µν•΄ μΆ…λ£ κ°€λ¥



## π” class 

### my_server.py

```python
class ChatRoom:
    addClient(self, c): λ¦¬μ¤νΈμ— ν΄λΌμ΄μ–ΈνΈ μ¶”κ°€
    delClient(self, c): λ¦¬μ¤νΈμ— ν΄λΌμ΄μ–ΈνΈ μ‚­μ 
    sendMsgAll(self, msg): λ¦¬μ¤νΈμ— μλ” λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² λ©”μ„Έμ§€ μ „μ†΅

class ChatClient:
    readMsg(self): ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ°›μ€ λ©”μ„Έμ§€λ¥Ό μ μ ν κ°€κ³µν• λ’¤ λ¨λ“  ν΄λΌμ΄μ–ΈνΈμ—κ² μ „λ‹¬(sendMsgAll)
    sendMsg(self,msg): ν•΄λ‹Ή μ†μΌ“μ„ ν†µν•΄ ν΄λΌμ΄μ–ΈνΈμ—κ² λ©”μ„Έμ§€ μ „μ†΅

class ChatServer:
    open(self): μ„λ²„ μ†μΌ“ κ°μ²΄ μƒμ„±, bind, listen
    sigint_handler(self, signum, frame): μ„λ²„ μΆ…λ£(μ†μΌ“ close)λ¥Ό μ„ν• μ‹κ·Έλ„ν•Έλ“¤λ¬
    run(self): μ±„ν… μ„λ²„ μ‹μ‘
```



### my_client.py

```python
class ChatClient:
    myconnect(self): ν΄λΌμ΄μ–ΈνΈ μ†μΌ“ κ°μ²΄λ¥Ό μƒμ„±, connect
    sendMsg(self): μ…λ ¥λ°›μ€ λ©”μ„Έμ§€λ¥Ό μ„λ²„λ΅ μ „μ†΅
    recvMsg(self): μ„λ²„λ΅λ¶€ν„° λ°›μ€ λ©”μ„Έμ§€λ¥Ό μ½μ†”μ— μ¶λ ¥
    run(self): ν΄λΌμ΄μ–ΈνΈ μ‹μ‘
    close(self): ν΄λΌμ΄μ–ΈνΈ μ†μΌ“ close
```



## π” TCP ν†µμ‹  κ³Όμ •

<img src="https://user-images.githubusercontent.com/37354145/124682309-6d820480-df05-11eb-92f4-f5937c710c53.png" alt="image" style="zoom:50%;" />

* μ„λ²„μ—μ„ bind() κ°€ ν•„μ”ν• μ΄μ ?
  * bind() λ” μ‘μ© ν”„λ΅κ·Έλ¨ μμ‹ μ μ£Όμ†μ™€ μ†μΌ“ λ²νΈλ¥Ό μ—°κ²°ν•λ” μ‘μ—…μ΄λ‹¤.
  * μ„μμ ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ νΉμ • ν”„λ΅κ·Έλ¨μ΄ λ§λ“  μ†μΌ“κ³Ό ν†µμ‹ μ„ ν•λ ¤λ©΄ κ·Έ μ†μΌ“μ„ μ°Ύμ„ μ μμ–΄μ•Ό ν•λ‹¤.
    λ”°λΌμ„ μ„λ²„λ” μ†μΌ“ λ²νΈμ™€ *ν΄λΌμ΄μ–ΈνΈκ°€ μ•κ³  μμ„ μ„λ²„μ IP μ£Όμ† λ° ν¬νΈλ²νΈ*(μ¦‰, μ„λ²„μ μ†μΌ“μ£Όμ†)λ¥Ό λ―Έλ¦¬ μ„λ΅ μ—°κ²°μ‹μΌλ‘μ–΄μ•Ό ν•λ‹¤.